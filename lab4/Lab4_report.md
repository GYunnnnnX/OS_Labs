# 操作系统课程ucore Lab4

## 练习0：填写已有实验

## 练习1：分配并初始化一个进程控制块（需要编码）

- 请说明`proc_struct`中`struct context context`和`struct trapframe *tf`成员变量含义和在本实验中的作用是啥？（提示通过看代码和编程调试可以判断出来）

## 练习2：为新创建的内核线程分配资源（需要编码）

- 请说明`ucore`是否做到给每个新fork的线程一个唯一的id？请说明你的分析和理由。

## 练习3：编写`proc_run` 函数（需要编码）

- 在本实验的执行过程中，创建且运行了几个内核线程？

## 扩展练习 Challenge：

1. 说明语句`local_intr_save(intr_flag);....local_intr_restore(intr_flag);`是如何实现开关中断的？
2. 深入理解不同分页模式的工作原理（思考题）
   - `get_pte()`函数中有两段形式类似的代码， 结合sv32，sv39，sv48的异同，解释这两段代码为什么如此相像。
   - 目前`get_pte()`函数将页表项的查找和页表项的分配合并在一个函数里，你认为这种写法好吗？有没有必要把两个功能拆开？